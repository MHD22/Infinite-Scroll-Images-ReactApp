{"ast":null,"code":"var _jsxFileName = \"/Users/mhd.sad22/udemy/JS-course/infinite-scroll/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport 'tachyons';\nimport Images from './Images';\nimport Loading from './Loading';\nconst apiKey = 'gZltUiUKrujp2xyoVwrqyrnolWRivEF1UvOnHqg4Dz8';\nlet count = 5;\nlet initial = true; // for first load of images to be just 5 \n\nlet url = `https://api.unsplash.com/photos/random/?client_id=${apiKey}&count=${count}`;\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.getPhotos = async function () {\n      try {\n        const response = await fetch(url);\n        let data = await response.json();\n        let imagesArray = await data.map((x, y) => {\n          //create <a> <img> </a> elements \n          return /*#__PURE__*/React.createElement(\"a\", {\n            key: y + this.state.photosArray.length,\n            href: x.links.html,\n            target: '_blank',\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 28,\n              columnNumber: 9\n            }\n          }, /*#__PURE__*/React.createElement(\"img\", {\n            src: x.urls.regular,\n            alt: x.alt_description,\n            title: x.alt_description,\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 32,\n              columnNumber: 17\n            }\n          }));\n        }); //edit the count after the first load to be 20 images and update the url ..\n\n        if (initial) {\n          initial = false;\n          count = 20;\n          url = url = `https://api.unsplash.com/photos/random/?client_id=${apiKey}&count=${count}`;\n        } //concatinate the new fetched images to the previous imageArray\n\n\n        this.setState({\n          photosArray: this.state.photosArray.concat(imagesArray),\n          ready: true,\n          loading: false\n        });\n      } catch (error) {\n        console.log(\"error..something wrong with fetching!..\");\n      }\n    };\n\n    this.state = {\n      loading: true,\n      photosArray: [],\n      ready: true\n    };\n  }\n\n  componentDidMount() {\n    this.getPhotos(); // add scroll event to widow object .. and set it to request when reach the bottom of the page..\n\n    window.addEventListener('scroll', () => {\n      // innerHeight = the whole height of the browser page // scrollY = where are we from the top of the page .. // body.offsetHeight = the whole height of the body including the part which is not appear // ready = to prevent sending multiple request at a time \n      if (window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000 && this.state.ready) {\n        this.setState({\n          ready: false\n        }, this.getPhotos);\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \" \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 7\n      }\n    }, 'Infinite Scroll Images'), this.state.loading ? /*#__PURE__*/React.createElement(Loading, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }\n    }) : /*#__PURE__*/React.createElement(Images, {\n      array: this.state.photosArray,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }\n    }));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/mhd.sad22/udemy/JS-course/infinite-scroll/src/App.js"],"names":["React","Images","Loading","apiKey","count","initial","url","App","Component","constructor","getPhotos","response","fetch","data","json","imagesArray","map","x","y","state","photosArray","length","links","html","urls","regular","alt_description","setState","concat","ready","loading","error","console","log","componentDidMount","window","addEventListener","innerHeight","scrollY","document","body","offsetHeight","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport 'tachyons';\nimport Images from './Images';\nimport Loading from './Loading';\n\nconst apiKey ='gZltUiUKrujp2xyoVwrqyrnolWRivEF1UvOnHqg4Dz8';\nlet count =5;\nlet initial = true; // for first load of images to be just 5 \nlet url=`https://api.unsplash.com/photos/random/?client_id=${apiKey}&count=${count}`;\nclass App extends React.Component {\n\n  constructor(){\n    super();\n    this.state={\n      loading:true,\n      photosArray:[],\n      ready:true,\n    }\n  }\n\n  getPhotos =async function(){\n    try{\n      const response= await fetch(url);\n      let data= await response.json();\n      let imagesArray=  await data.map( (x,y) => { //create <a> <img> </a> elements \n        return(\n        <a \n            key={y+this.state.photosArray.length} \n            href={x.links.html} \n            target={'_blank'} >\n                <img \n                     src={x.urls.regular} \n                    alt={x.alt_description} \n                    title={x.alt_description}  />\n         </a>)\n    });\n    //edit the count after the first load to be 20 images and update the url ..\n    if(initial){\n      initial = false  ;\n      count = 20;\n      url = url=`https://api.unsplash.com/photos/random/?client_id=${apiKey}&count=${count}`;\n    }\n      //concatinate the new fetched images to the previous imageArray\n      this.setState({photosArray : this.state.photosArray.concat(imagesArray) , ready:true , loading:false});\n      \n      \n    }\n      catch(error){\n      console.log(\"error..something wrong with fetching!..\");\n    }\n  }\n\n  componentDidMount(){\n    this.getPhotos();\n    // add scroll event to widow object .. and set it to request when reach the bottom of the page..\n    window.addEventListener('scroll',()=>{\n      // innerHeight = the whole height of the browser page // scrollY = where are we from the top of the page .. // body.offsetHeight = the whole height of the body including the part which is not appear // ready = to prevent sending multiple request at a time \n      if(window.innerHeight + window.scrollY >= document.body.offsetHeight - 1000 && this.state.ready)\n      {\n        this.setState({ready:false}, this.getPhotos);\n      }\n    \n    });\n  }\n  render(){\n  return (\n\n    <div className=\"App\">\n      <h1 className=\" \">{'Infinite Scroll Images'}</h1>\n      { this.state.loading?\n      <Loading/> :\n      <Images array={this.state.photosArray}/>\n      }\n    </div>\n  );\n}\n}\nexport default App;\n"]},"metadata":{},"sourceType":"module"}